# Handle extension
OS=$(uname -s)

if [ "$OS" = "Darwin" ]; then
  echo 'Configuring for macOS...'
  LIB_EXT="dylib"
elif [ "$OS" = "Linux" ]; then
  echo 'Configuring for Linux...'
  LIB_EXT="so"
else
  echo "Unknown OS type: $OS"
  exit 1
fi

cd readCon
meson setup bbdir
meson compile -C bbdir

# Then use $LIB_EXT in the rest of your script
cp "bbdir/CppCore/libreadcon.$LIB_EXT" ../src/

# Emacs Stuff (cross platform)
# Local Variables:
# mode: shell-script
# End:
