# Detect the operating system
# Makevars may not run in a shell so no OSTYPE
UNAME_S := $(shell uname -s)

# Set the extension based on the operating system
ifeq ($(UNAME_S),Darwin)
    LIB_EXT = dylib
else
    LIB_EXT = so
endif

# On macos, with conda, we need disable_availability
# https://conda-forge.org/docs/maintainer/knowledge_base.html#newer-c-features-with-old-sdk
PKG_CPPFLAGS = -I./../readCon/CppCore -D_LIBCPP_DISABLE_AVAILABILITY
PKG_LDLIBS = -lreadcon
PKG_LIBS = ./libreadcon.$(LIB_EXT)
# Needed for readCon
PKG_CXX_STD = CXX20
